global s
global t
global i

probe process("driver").mark("lpc__entry")
{
  if(!i++){
    t = gettimeofday_us();
    /*if(user_string($arg2)== "process_input"){
      s = 1;
    }
    else{
      s = 0;
    }*/
  }
  if(s)  
    printf("%*s->%s(%s) %s\n", i*2, "", user_string($arg1), user_string($arg3), user_string($arg2));
}

probe process("driver").mark("lpc__return")
{
  if(!s && gettimeofday_us() - t > 1000000)
    s = 1;
  if(s)
    printf("%*s<-%s(%s) %s\n", i*2, "", user_string($arg1), user_string($arg3), user_string($arg2));
  if(i)
    i--;
  if(!i && gettimeofday_us() - t > 1000000){
    printf("%s(%s):%s %d us\n", user_string($arg1), user_string($arg3), user_string($arg2), gettimeofday_us() - t);
    s = 0;
  }
}